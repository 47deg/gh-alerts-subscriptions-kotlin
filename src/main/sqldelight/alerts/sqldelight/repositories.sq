import alerts.persistence.RepositoryId;

CREATE TABLE IF NOT EXISTS repositories (
  repository_id BIGSERIAL AS RepositoryId PRIMARY KEY,
  owner VARCHAR NOT NULL,
  repository VARCHAR NOT NULL,
  CONSTRAINT unique_repos UNIQUE (owner, repository)
);

insert:
INSERT INTO repositories(owner, repository)
VALUES (:repositoryOwner, :repositoryName)
RETURNING repository_id;

-- ON CONFLICT
-- ON CONSTRAINT unique_repos
-- DO UPDATE SET owner = EXCLUDED.Owner;
